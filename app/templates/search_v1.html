<!DOCTYPE html>
<html>
<head>
    <title>Comics List</title>

    <link rel="stylesheet" href="https://cdn.datatables.net/1.11.2/css/jquery.dataTables.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.datatables.net/1.11.2/js/jquery.dataTables.min.js"></script>
    
    <script>
        const column_list = [
            { title: 'ã‚¿ã‚¤ãƒˆãƒ«', data: 'title' },
            { title: 'ã‚¿ã‚¤ãƒˆãƒ«ï¼ˆã‹ãªï¼‰', data: 'title_kana', visible: false },
            { title: 'è‘—è€…', data: 'main_author' },
            { title: 'è‘—è€…2', data: 'sub_author', visible: false },
            { title: 'ã‚¢ãƒ—ãƒª', data: 'app_name' },
            { title: 'ãƒªãƒ³ã‚¯', data: 'url',
                render: function(data, type, row, meta) {
                    return '<a href="' + data + '" target="_blank">ğŸ”—</a>';
                } },
            { title: 'æƒ…å ±å–å¾—æ—¥', data: 'crawled_at' }
        ]
        // column_listã«é€£ç•ªã‚’æŒ¯ã‚‹
        const columndefs = column_list.map((column, index) => {
            return {
                targets: index,
                ...column
            }
        });

        $(document).ready(function() {
            $('#comics-table').DataTable({
                ajax: {
                    url: '/api/comics_table',
                    dataSrc: 'data'
                },
                responsive: true,
                order: [[0, 'asc']],
                language: {
                    url: 'https://cdn.datatables.net/plug-ins/1.11.2/i18n/ja.json'
                },
                lengthMenu: [[50, 100, 500, -1], [50, 100, 500, "å…¨ä»¶è¡¨ç¤º"]], 
                pagingType: 'full_numbers',
                columnDefs: columndefs,
            });
        });
    </script>
</head>
<body>
    <h1>Comics List</h1>

    <a href="/app_status">ã‚¢ãƒ—ãƒªæƒ…å ±å–å¾—çŠ¶æ³</a>

    <table id="comics-table">
    </table>
</body>
</html>